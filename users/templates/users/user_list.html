{% extends "base.html" %}

{% block title %}Авторы{% endblock %}

{% load bootstrap5 %}

{% block content %}
    <section>
        <h2 class="display-4">Авторы</h2>

      <form method="get">
        <div class="d-flex align-items-start flex-column">
          <div class="d-flex justify-content-start align-items-center">
            <div>{% bootstrap_field filter.form.username bound_css_class='' %}</div>
            <div class="mt-3 ms-2"><input type="submit" class="btn btn-outline-primary" value="Найти"></div>
          </div>
          <div class="d-flex justify-content-start align-items-start">
            <div>{% bootstrap_field filter.form.by_article_count bound_css_class='form-select-sm' %}</div>
          </div>
        </div>
      </form>

      {% if user_list %}
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-end align-items-start">
          <div>Подписчики</div> <div class="ms-4">Публикации</div>
        </li>
        {% for author in user_list %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <img
          {% if author.profile.profile_picture %}
          src="{{ author.profile.profile_picture.url }}"
          {% else %}
          {% load static %}
          src="{% static 'users/images/default.jpg' %}"
          {% endif %}
          class="img-fluid rounded-pill"
          alt="profile-picture"
          width="65px"
          height="65px"
          >
          <div class="ms-2 mt-1 me-auto text-break">
            <a href="{% url 'users:profile' author.username %}">
              <div class="fw-bold text-break">
                {{ author.get_username }}
              </div>
            </a>
                {% if author.is_online %}
                <span class="text-success">Онлайн</span>
                {% else %}
                <span class="text-secondary">Не в сети</span>
                {% endif %}
            <div>{{ author.get_full_name }}</div>
            <div>{{ author.profile.about_me }}</div>
          </div>
          <span class="badge bg-secondary rounded-pill ms-5">{{ author.article_set.count }}</span>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p>По вашему запросу ничего не найдено</p>
      {% endif %}
    </section>
{% endblock %}